# Nostream-ILP Environment Configuration
# Copy this file to .env and customize for your environment

# ============================================================================
# Dassie ILP Node Configuration (Story 1.2+)
# ============================================================================

# WebSocket URL for Dassie RPC endpoint
# Default: ws://localhost:5000/trpc (local development)
# Production: ws://dassie:5000/trpc (Docker Compose)
DASSIE_RPC_URL=ws://localhost:5000/trpc

# Feature flag: Are custom payment.* endpoints available in Dassie?
# Set to 'true' only after Epic 2 Dassie fork is complete
# Default: false
DASSIE_PAYMENT_ENDPOINTS_AVAILABLE=false

# ============================================================================
# Nostream Relay Configuration
# ============================================================================

# See .nostr/settings.yaml for full relay configuration
# Environment variables can override YAML settings

# Relay name
# RELAY_NAME=nostream-ilp

# Relay description
# RELAY_DESCRIPTION=Nostr relay with ILP payment integration

# Public URL of this relay
# RELAY_PUBLIC_URL=wss://relay.example.com

# ============================================================================
# Database Configuration
# ============================================================================

# PostgreSQL connection
DB_HOST=localhost
DB_PORT=5432
DB_NAME=nostream
DB_USER=nostream
DB_PASSWORD=nostream

# Redis connection
REDIS_HOST=localhost
REDIS_PORT=6379
# REDIS_PASSWORD=

# ============================================================================
# Payment Configuration (Story 1.3+)
# ============================================================================

# Enable payment requirements for events
# PAYMENTS_ENABLED=false

# Currencies accepted for payment (comma-separated)
# ACCEPTED_CURRENCIES=BTC,BASE,AKT,XRP

# Minimum payment amounts (in smallest units: sats, wei, uakt, drops)
# MIN_PAYMENT_BTC_SATS=1000
# MIN_PAYMENT_BASE_WEI=100000000000000
# MIN_PAYMENT_AKT_UAKT=1000000
# MIN_PAYMENT_XRP_DROPS=1000000

# ============================================================================
# Pricing Configuration (Story 1.5)
# ============================================================================

# Default pricing for relay operations (in satoshis)
PRICING_STORE_EVENT=10           # Satoshis per event stored
PRICING_DELIVER_EVENT=1          # Satoshis per event delivered via REQ
PRICING_QUERY=5                  # Satoshis per REQ subscription

# Free Tier Configuration (Story 1.6)
# Number of free events per pubkey before payment required
# Set to 0 to disable free tier (all events require payment)
#
# Use cases:
#   - Trial period for new users
#   - Onboarding without requiring immediate payment setup
#   - Testing relay functionality before committing
#
# Example values:
#   100  = 100 free events (good for trial period, ~$1 value at 10 sats/event)
#   1000 = 1000 free events (generous trial, ~$10 value)
#   0    = no free tier (immediate payment required, recommended for production)
#
# Note: Whitelisted pubkeys have unlimited free events (see CLI tools)
# Note: Free tier is tracked per-pubkey in the database (persists across restarts)
PRICING_FREE_TIER_EVENTS=0

# Per-Kind Pricing Overrides (optional, comma-separated)
# Format: kind:amount (e.g., "1:10,30023:100,1063:500")
# Allows different pricing for specialized content types
# Examples:
#   - Kind 1 (short note): 10 sats
#   - Kind 30023 (long-form article): 100 sats
#   - Kind 1063 (file metadata): 500 sats
#   - Kind 71 (video): 1000 sats
PRICING_KIND_OVERRIDES=

# ============================================================================
# Logging Configuration
# ============================================================================

# Log level: trace, debug, info, warn, error, fatal
LOG_LEVEL=info

# Pretty print logs (development only)
LOG_PRETTY=true

# ============================================================================
# Development/Testing
# ============================================================================

# Node environment
NODE_ENV=development

# Enable debug output for specific modules (comma-separated)
# DEBUG=dassie-client,payment-processor

# Test mode (skip certain validations)
# TEST_MODE=false
